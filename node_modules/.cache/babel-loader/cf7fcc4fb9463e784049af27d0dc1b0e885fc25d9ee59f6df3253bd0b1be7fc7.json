{"ast":null,"code":"var _loadCart;\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { loadCart, saveCart, clearCartStorage } from \"../../app/localStorage\";\n\n// Load saved cart from localStorage, or create empty cart\nconst initialState = (_loadCart = loadCart()) !== null && _loadCart !== void 0 ? _loadCart : {\n  items: {}\n};\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    // Set quantity for a specific product\n    setQty(state, action) {\n      const {\n        id,\n        qty\n      } = action.payload;\n\n      // If qty is 0 or below → remove item from cart\n      if (qty <= 0) {\n        delete state.items[id];\n      } else {\n        state.items[id] = qty;\n      }\n\n      // Save updated cart to localStorage\n      saveCart(state);\n    },\n    // -------------------------------------------------------------\n    // 2️⃣ Increase quantity of a product (default increase = 1)\n    // -------------------------------------------------------------\n    increase(state, action) {\n      var _state$items$id;\n      const {\n        id,\n        by = 1\n      } = action.payload;\n      const currentQty = (_state$items$id = state.items[id]) !== null && _state$items$id !== void 0 ? _state$items$id : 0;\n      state.items[id] = currentQty + by; // Add quantity\n\n      saveCart(state);\n    },\n    // -------------------------------------------------------------\n    // 3️⃣ Decrease quantity (remove item if qty goes to 0)\n    // -------------------------------------------------------------\n    decrease(state, action) {\n      var _state$items$id2;\n      const {\n        id,\n        by = 1\n      } = action.payload;\n      const currentQty = (_state$items$id2 = state.items[id]) !== null && _state$items$id2 !== void 0 ? _state$items$id2 : 0;\n      const newQty = currentQty - by;\n      if (newQty <= 0) {\n        delete state.items[id]; // remove item if qty is 0 or below\n      } else {\n        state.items[id] = newQty;\n      }\n      saveCart(state);\n    },\n    // -------------------------------------------------------------\n    // 4️⃣ Clear the entire cart (used in Basket Page)\n    // -------------------------------------------------------------\n    clearCart(state) {\n      state.items = {}; // empty all cart items\n      clearCartStorage(); // clear localStorage\n    }\n  }\n});\n\n// Export actions so components can use them\nexport const {\n  setQty,\n  increase,\n  decrease,\n  clearCart\n} = cartSlice.actions;\n\n// Export the reducer to add it inside the Redux store\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","loadCart","saveCart","clearCartStorage","initialState","_loadCart","items","cartSlice","name","reducers","setQty","state","action","id","qty","payload","increase","_state$items$id","by","currentQty","decrease","_state$items$id2","newQty","clearCart","actions","reducer"],"sources":["C:/Users/devan/OneDrive/Desktop/BillingSys/billing-system-app/src/features/cart/cartSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { CartState } from \"../../types\";\r\nimport { loadCart, saveCart, clearCartStorage } from \"../../app/localStorage\";\r\n\r\n// Load saved cart from localStorage, or create empty cart\r\nconst initialState: CartState = loadCart() ?? { items: {} };\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState,\r\n  reducers: {\r\n    \r\n    // Set quantity for a specific product\r\n    setQty(state, action: PayloadAction<{ id: string; qty: number }>) {\r\n      const { id, qty } = action.payload;\r\n\r\n      // If qty is 0 or below → remove item from cart\r\n      if (qty <= 0) {\r\n        delete state.items[id];\r\n      } else {\r\n        state.items[id] = qty;\r\n      }\r\n\r\n      // Save updated cart to localStorage\r\n      saveCart(state);\r\n    },\r\n\r\n    // -------------------------------------------------------------\r\n    // 2️⃣ Increase quantity of a product (default increase = 1)\r\n    // -------------------------------------------------------------\r\n    increase(state, action: PayloadAction<{ id: string; by?: number }>) {\r\n      const { id, by = 1 } = action.payload;\r\n\r\n      const currentQty = state.items[id] ?? 0;\r\n      state.items[id] = currentQty + by; // Add quantity\r\n\r\n      saveCart(state);\r\n    },\r\n\r\n    // -------------------------------------------------------------\r\n    // 3️⃣ Decrease quantity (remove item if qty goes to 0)\r\n    // -------------------------------------------------------------\r\n    decrease(state, action: PayloadAction<{ id: string; by?: number }>) {\r\n      const { id, by = 1 } = action.payload;\r\n\r\n      const currentQty = state.items[id] ?? 0;\r\n      const newQty = currentQty - by;\r\n\r\n      if (newQty <= 0) {\r\n        delete state.items[id]; // remove item if qty is 0 or below\r\n      } else {\r\n        state.items[id] = newQty;\r\n      }\r\n\r\n      saveCart(state);\r\n    },\r\n\r\n    // -------------------------------------------------------------\r\n    // 4️⃣ Clear the entire cart (used in Basket Page)\r\n    // -------------------------------------------------------------\r\n    clearCart(state) {\r\n      state.items = {}; // empty all cart items\r\n      clearCartStorage(); // clear localStorage\r\n    },\r\n  },\r\n});\r\n\r\n// Export actions so components can use them\r\nexport const { setQty, increase, decrease, clearCart } = cartSlice.actions;\r\n\r\n// Export the reducer to add it inside the Redux store\r\nexport default cartSlice.reducer;\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAuB,kBAAkB;AAE7D,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,gBAAgB,QAAQ,wBAAwB;;AAE7E;AACA,MAAMC,YAAuB,IAAAC,SAAA,GAAGJ,QAAQ,CAAC,CAAC,cAAAI,SAAA,cAAAA,SAAA,GAAI;EAAEC,KAAK,EAAE,CAAC;AAAE,CAAC;AAE3D,MAAMC,SAAS,GAAGP,WAAW,CAAC;EAC5BQ,IAAI,EAAE,MAAM;EACZJ,YAAY;EACZK,QAAQ,EAAE;IAER;IACAC,MAAMA,CAACC,KAAK,EAAEC,MAAkD,EAAE;MAChE,MAAM;QAAEC,EAAE;QAAEC;MAAI,CAAC,GAAGF,MAAM,CAACG,OAAO;;MAElC;MACA,IAAID,GAAG,IAAI,CAAC,EAAE;QACZ,OAAOH,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC;MACxB,CAAC,MAAM;QACLF,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,GAAGC,GAAG;MACvB;;MAEA;MACAZ,QAAQ,CAACS,KAAK,CAAC;IACjB,CAAC;IAED;IACA;IACA;IACAK,QAAQA,CAACL,KAAK,EAAEC,MAAkD,EAAE;MAAA,IAAAK,eAAA;MAClE,MAAM;QAAEJ,EAAE;QAAEK,EAAE,GAAG;MAAE,CAAC,GAAGN,MAAM,CAACG,OAAO;MAErC,MAAMI,UAAU,IAAAF,eAAA,GAAGN,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,cAAAI,eAAA,cAAAA,eAAA,GAAI,CAAC;MACvCN,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,GAAGM,UAAU,GAAGD,EAAE,CAAC,CAAC;;MAEnChB,QAAQ,CAACS,KAAK,CAAC;IACjB,CAAC;IAED;IACA;IACA;IACAS,QAAQA,CAACT,KAAK,EAAEC,MAAkD,EAAE;MAAA,IAAAS,gBAAA;MAClE,MAAM;QAAER,EAAE;QAAEK,EAAE,GAAG;MAAE,CAAC,GAAGN,MAAM,CAACG,OAAO;MAErC,MAAMI,UAAU,IAAAE,gBAAA,GAAGV,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,cAAAQ,gBAAA,cAAAA,gBAAA,GAAI,CAAC;MACvC,MAAMC,MAAM,GAAGH,UAAU,GAAGD,EAAE;MAE9B,IAAII,MAAM,IAAI,CAAC,EAAE;QACf,OAAOX,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,CAAC,CAAC;MAC1B,CAAC,MAAM;QACLF,KAAK,CAACL,KAAK,CAACO,EAAE,CAAC,GAAGS,MAAM;MAC1B;MAEApB,QAAQ,CAACS,KAAK,CAAC;IACjB,CAAC;IAED;IACA;IACA;IACAY,SAASA,CAACZ,KAAK,EAAE;MACfA,KAAK,CAACL,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;MAClBH,gBAAgB,CAAC,CAAC,CAAC,CAAC;IACtB;EACF;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAM;EAAEO,MAAM;EAAEM,QAAQ;EAAEI,QAAQ;EAAEG;AAAU,CAAC,GAAGhB,SAAS,CAACiB,OAAO;;AAE1E;AACA,eAAejB,SAAS,CAACkB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}